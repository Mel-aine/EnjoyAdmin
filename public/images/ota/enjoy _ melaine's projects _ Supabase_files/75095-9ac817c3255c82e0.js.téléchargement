try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4aba8f2e-195a-4124-9877-452463d67d62",e._sentryDebugIdIdentifier="sentry-dbid-4aba8f2e-195a-4124-9877-452463d67d62")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75095],{27843:(e,t,a)=>{a.d(t,{A:()=>x});var r=a(80263),n=a(52555),s=a.n(n),l=a(22891),c=a(78960),i=a(2657),d=a(24487),o=a(21650),u=a(61767),f=a(39691);let g=()=>{let{ref:e}=(0,l.g)(),t=(0,f.kM)(),{storageAnalytics:a,storageVectors:n}=(0,i.x)(["storage:analytics","storage:vectors"]),g=(0,c.mM)({projectRef:e}),m=(0,c.Dc)({projectRef:e}),p=Object.entries(u.TD).filter(e=>{let[t]=e;return"analytics"===t?l.pe&&a:"vectors"!==t||l.pe&&n});return(0,r.jsx)(d.Ay,{type:"pills",className:"my-6 flex flex-grow flex-col","data-sentry-element":"Menu","data-sentry-component":"StorageMenuV2","data-sentry-source-file":"StorageMenuV2.tsx",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"mx-3",children:[(0,r.jsx)(d.Ay.Group,{title:(0,r.jsx)("span",{className:"uppercase font-mono",children:"Manage"}),"data-sentry-element":"Menu.Group","data-sentry-source-file":"StorageMenuV2.tsx"}),p.map(a=>{let[n,l]=a,c=t===n,i="analytics"===n&&g||"vectors"===n&&m;return(0,r.jsx)(s(),{href:"/project/".concat(e,"/storage/").concat(n),children:(0,r.jsx)(d.Ay.Item,{rounded:!0,active:c,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("p",{className:"truncate",children:l.displayName}),i&&(0,r.jsx)(o.E,{variant:"default",size:"small",children:"New"})]})})},n)})]}),l.pe&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-px w-full bg-border"}),(0,r.jsxs)("div",{className:"mx-3",children:[(0,r.jsx)(d.Ay.Group,{title:(0,r.jsx)("span",{className:"uppercase font-mono",children:"Configuration"})}),(0,r.jsx)(s(),{href:"/project/".concat(e,"/storage/s3"),children:(0,r.jsx)(d.Ay.Item,{rounded:!0,active:"s3"===t,children:(0,r.jsx)("p",{className:"truncate",children:"S3"})})})]})]})]})})};var m=a(9497),p=a(29471);let x=(0,m.r)(e=>{let{title:t,children:a}=e;return(0,r.jsx)(p.k,{title:t||"Storage",product:"Storage",productMenu:(0,r.jsx)(g,{}),"data-sentry-element":"ProjectLayout","data-sentry-component":"StorageLayout","data-sentry-source-file":"StorageLayout.tsx",children:a})})},30688:(e,t,a)=>{a.d(t,{NV:()=>x,RR:()=>p,SJ:()=>g,Ys:()=>h,tq:()=>m,vT:()=>y,zR:()=>v,zY:()=>f});var r=a(80263),n=a(79279),s=a(53239),l=a(80100),c=a(3462),i=a(45218);let d=(0,n.F)(["flex flex-col gap-4 w-full"],{variants:{size:{default:"pt-12",small:"pt-12",large:"pt-12",full:"pt-6"}},defaultVariants:{size:"default"}}),o=(0,s.createContext)({size:"default"}),u=()=>(0,s.useContext)(o),f=e=>{let{className:t,size:a,children:n,...s}=e,c=null!=a?a:"default";return(0,r.jsx)(o.Provider,{value:{size:c},"data-sentry-element":"PageHeaderContext.Provider","data-sentry-component":"PageHeaderRoot","data-sentry-source-file":"index.tsx",children:(0,r.jsx)("div",{"data-slot":"page-header","data-size":c,className:(0,l.cn)(d({size:c}),t),...s,children:n})})},g=e=>{let{className:t,children:a,...n}=e,{size:s}=u();return(0,r.jsx)(i.L,{size:s,"data-sentry-element":"PageContainer","data-sentry-component":"PageHeaderBreadcrumb","data-sentry-source-file":"index.tsx",children:(0,r.jsx)(c.Qp,{"data-slot":"page-header-breadcrumb",className:(0,l.cn)("flex items-center gap-4 [&_li]:text-xs",t),...n,"data-sentry-element":"Breadcrumb","data-sentry-source-file":"index.tsx",children:a})})};g.displayName="PageHeaderBreadcrumb";let m=e=>{let{className:t,children:a,...n}=e;return(0,r.jsx)("div",{"data-slot":"page-header-summary",className:(0,l.cn)("flex flex-col gap-1",t),...n,"data-sentry-component":"PageHeaderSummary","data-sentry-source-file":"index.tsx",children:a})};m.displayName="PageHeaderSummary";let p=e=>{let{className:t,children:a,...n}=e;return(0,r.jsx)("h1",{"data-slot":"page-header-title",className:(0,l.cn)("heading-title",t),...n,"data-sentry-component":"PageHeaderTitle","data-sentry-source-file":"index.tsx",children:a})},x=e=>{let{className:t,children:a,...n}=e;return(0,r.jsx)("div",{"data-slot":"page-header-description",className:(0,l.cn)("heading-subSection text-foreground-light",t),...n,"data-sentry-component":"PageHeaderDescription","data-sentry-source-file":"index.tsx",children:a})},h=e=>{let{className:t,children:a,...n}=e,{size:s}=u();return(0,r.jsx)(i.L,{size:s,"data-sentry-element":"PageContainer","data-sentry-component":"PageHeaderMeta","data-sentry-source-file":"index.tsx",children:(0,r.jsx)("div",{"data-slot":"page-header-meta",className:(0,l.cn)("flex flex-col @xl:flex-row @xl:justify-between @xl:items-center gap-4",'[&>[data-slot="page-header-icon"]]:shrink-0','[&>[data-slot="page-header-summary"]]:flex-1',t),...n,children:a})})};h.displayName="PageHeaderMeta";let y=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"page-header-actions",className:(0,l.cn)("flex items-center gap-2 shrink-0",t),...a,"data-sentry-component":"PageHeaderAside","data-sentry-source-file":"index.tsx"})};y.displayName="PageHeaderAside";let v=e=>{let{className:t,...a}=e,{size:n}=u();return(0,r.jsx)(i.L,{size:n,className:(0,l.cn)("full"===n&&"border-b"),"data-sentry-element":"PageContainer","data-sentry-component":"PageHeaderNavigationTabs","data-sentry-source-file":"index.tsx",children:(0,r.jsx)("div",{"data-slot":"page-header-footer",className:(0,l.cn)("w-full [&>nav]:border-b-0","full"!==n&&"border-b",t),...a})})};v.displayName="PageHeaderNavigationTabs"},39691:(e,t,a)=>{a.d(t,{EQ:()=>y,Xn:()=>h,_S:()=>o,kM:()=>v,kg:()=>m,wS:()=>x});var r=a(42092),n=a.n(r),s=a(107),l=a.n(s),c=a(80814),i=a(61767);let d=e=>{let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t&=t;return new Uint32Array([t])[0].toString(36)},o=(e,t)=>0===t.length?[]:g(u(e,t)),u=(e,t)=>{let a=e.map(e=>e.name);return t.map(e=>{let{definition:t,check:r}=e,n=null!==t?f(t):f(r);return n&&a.includes(n)?{...e,bucket:n}:{...e,bucket:"Ungrouped"}})},f=e=>{var t;let[a]=(null!=(t=null==e?void 0:e.split(" AND "))?t:[]).filter(e=>e.includes("bucket_id"));return a?a.split("'")[1]:null},g=e=>{let t=l()(e,"bucket");return Object.keys(t).map(e=>({name:e,policies:t[e]}))},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{name:r,definition:n,allowedOperations:s,roles:l}=t,c=n?n.replace(/\s+/g," ").trim():"";return s.map((t,n)=>p(n,e,r,c,t,l,a))},p=(e,t,a,r,n,s,l)=>{let c=d(t);return{name:l?"".concat(a," ").concat(c,"_").concat(e):a,definition:"INSERT"===n?void 0:"(".concat(r,")"),action:"PERMISSIVE",check:"INSERT"===n?"(".concat(r,")"):void 0,command:n,schema:"storage",table:"objects",roles:s.length>0?s:void 0}},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.keys(i.Uw).filter(t=>{let a=i.Uw[t];if(0===n()(a,e).length)return t})},h=function(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{name:r,definition:n,allowedOperations:s,roles:l}=t;return s.map((t,s)=>((e,t,a,r,n,s,l)=>{let c=d(t),i=l?"".concat(a," ").concat(c,"_").concat(e):a,o="Add policy for the ".concat(n,' operation under the policy "').concat(a,'"'),u=0===s.length?["public"]:s;return{description:o,statement:'\n    CREATE POLICY "'.concat(i,'"\n    ON storage.objects\n    FOR ').concat(n,"\n    TO ").concat(u.join(", "),"\n    ").concat("INSERT"===n?"WITH CHECK":"USING"," (").concat(r,");\n").replace(/\s+/g," ").trim()}})(s,e,r,n||"",t,l,a))},y=(e,t)=>e.replace("{bucket_id}","'".concat(t,"'")),v=()=>(0,c.useRouter)().pathname.split("/")[4]},77875:(e,t,a)=>{a.d(t,{O:()=>c,h:()=>l});var r=a(80263),n=a(53239),s=a(80100);let l=(0,n.forwardRef)((e,t)=>(0,r.jsx)("nav",{ref:t,dir:"ltr",...e,className:(0,s.cn)("border-b",e.className),children:(0,r.jsx)("ul",{role:"menu",className:"flex gap-5",children:e.children})})),c=(0,n.forwardRef)((e,t)=>{let{children:a,className:n,active:l,...c}=e;return(0,r.jsx)("li",{ref:t,"aria-selected":l?"true":"false","data-state":l?"active":"inactive",className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap text-sm ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground text-foreground-lighter hover:text-foreground data-[state=active]:border-foreground border-b-2 border-transparent *:py-1.5",n),...c,children:a})})},78960:(e,t,a)=>{a.d(t,{Dc:()=>o,Ij:()=>i,mM:()=>d});var r=a(67850),n=a(24523),s=a(85039),l=a(30659);async function c(e,t){let{projectRef:a}=e;if(!a)throw Error("projectRef is required");let{data:r,error:s}=await (0,n.Jt)("/platform/projects/{ref}/config/storage",{params:{path:{ref:a}},signal:t});return s&&(404===s.code?(0,n.H4)({...s,message:"Storage configuration not found."}):(0,n.H4)(s)),r}let i=function(e){let{projectRef:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)({queryKey:l.n.storage(t),queryFn:e=>{let{signal:a}=e;return c({projectRef:t},a)},enabled:a&&s.pe&&void 0!==t,...n})},d=e=>{var t;let{projectRef:a}=e,{data:r}=i({projectRef:a});return!!(null==r||null==(t=r.features.icebergCatalog)?void 0:t.enabled)},o=e=>{var t;let{projectRef:a}=e,{data:r}=i({projectRef:a});return!!(null==r||null==(t=r.features.vectorBuckets)?void 0:t.enabled)}},87829:(e,t,a)=>{a.d(t,{D:()=>g});var r=a(80263),n=a(52555),s=a.n(n),l=a(22891),c=a(61767),i=a(39691),d=a(41273),o=a(3701),u=a(77875),f=a(30688);let g=e=>{var t;let{title:a,hideSubtitle:n=!1,children:g}=e,{ref:m}=(0,l.g)(),p=(0,o.usePathname)(),x=(0,i.kM)(),h=x&&"s3"!==x?c.TD[x]:void 0,y="files"===x?[{label:"Buckets",href:"/project/".concat(m,"/storage/files")},{label:"Settings",href:"/project/".concat(m,"/storage/files/settings")},{label:"Policies",href:"/project/".concat(m,"/storage/files/policies")}]:[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.zY,{"data-sentry-element":"PageHeader","data-sentry-source-file":"StorageBucketsLayout.tsx",children:[(0,r.jsxs)(f.Ys,{"data-sentry-element":"PageHeaderMeta","data-sentry-source-file":"StorageBucketsLayout.tsx",children:[(0,r.jsxs)(f.tq,{"data-sentry-element":"PageHeaderSummary","data-sentry-source-file":"StorageBucketsLayout.tsx",children:[(0,r.jsx)(f.RR,{"data-sentry-element":"PageHeaderTitle","data-sentry-source-file":"StorageBucketsLayout.tsx",children:a||(null!=(t=null==h?void 0:h.displayName)?t:"Storage")}),!n&&(0,r.jsx)(f.NV,{children:(null==h?void 0:h.description)||"Manage your storage buckets and files."})]}),(0,r.jsx)(f.vT,{"data-sentry-element":"PageHeaderAside","data-sentry-source-file":"StorageBucketsLayout.tsx",children:(null==h?void 0:h.docsUrl)&&(0,r.jsx)(d.A,{href:h.docsUrl},"docs")})]}),y.length>0&&(0,r.jsx)(f.zR,{children:(0,r.jsx)(u.h,{children:y.map(e=>(0,r.jsx)(u.O,{active:p===e.href,children:(0,r.jsx)(s(),{href:e.href,children:e.label})},e.label))})})]}),g]})}}}]);